<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!--
 * This file is a component of env.js,
 *     http://github.com/thatcher/env-js/
 * a Pure JavaScript Browser Environment
 * Copyright 2010 John Resig, licensed under the MIT License
 *     http://www.opensource.org/licenses/mit-license.php
  -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en" dir="ltr" id="html">
  <head>
    <title>Document for testing arbitrary-depth IFRAME nesting in env.js</title>
  </head>
  <body onload="bodyOnloadHandler();">
    <script>
      window.top.numberNestedIframeLoads++;
      window.onload = function(){
        var p = document.createElement('p');
        p.setAttribute('id', "pCreatedIframeOnload" +
          window.top.numberNestedIframeLoads);
        var t = document.createTextNode("para window onload " +
          window.top.numberNestedIframeLoads);
        p.appendChild(t);
        document.getElementsByTagName('body')[0].appendChild(p);
        window.top.windowLoadCount++;
      }
    </script>

    <!--
      This document will be loaded into an IFRAME, and the following
      JavaScript finds an element in the parent document that contains
      the nesting level count, increments it, and then produces an
      identical element with the result in this document.
      -->

    <p>Nesting level:
      <script>
        var counterAsText = window.parent.document.
          getElementById('nestingLevel').innerHTML;
        var newCount = parseInt(counterAsText) + 1;
        document.write('\x3cspan id="nestingLevel"\x3e' + newCount +
                       '\x3c/span\x3e');
      </script>
    </p>
  </body>
</html>
